"""
Пользовательские исключения для системы мониторинга цен.

Модуль содержит определения исключений, используемых в системе
для обработки ошибок при работе с API маркетплейсов, проблем с сетью
и других ситуаций, требующих корректной обработки ошибок.
"""


class DMarketError(Exception):
    """
    Базовое исключение для ошибок, связанных с DMarket.

    Используется как родительский класс для всех специализированных
    исключений, относящихся к работе с маркетплейсом DMarket.
    """


class DMarketAPIError(DMarketError):
    """
    Исключение, вызываемое при ошибках, возвращаемых API DMarket.

    Содержит информацию о статус-коде ответа, сообщении об ошибке
    и, опционально, теле ответа для диагностики.
    """

    def __init__(self, status_code: int, message: str, response_body: dict | str | None = None):
        """
        Инициализация исключения DMarketAPIError.

        Args:
            status_code: HTTP статус-код ответа
            message: Текстовое сообщение об ошибке
            response_body: Тело ответа от API (опционально)
        """
        self.status_code = status_code
        self.message = message
        self.response_body = response_body
        super().__init__(f"DMarket API Error {status_code}: {message}")


class NetworkError(DMarketError):
    """
    Исключение, вызываемое при сетевых ошибках во время вызовов API.

    Используется для обработки проблем с соединением, таймаутов
    и других сетевых проблем.
    """


class InvalidResponseFormatError(DMarketError):
    """
    Исключение при неожиданном или некорректном формате ответа API.

    Вызывается, когда ответ от API не соответствует ожидаемой структуре,
    что может указывать на изменения в API или на другие проблемы.
    """
